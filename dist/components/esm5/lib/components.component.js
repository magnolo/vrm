import { __decorate } from "tslib";
import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, Input, OnInit, QueryList, Renderer2, SimpleChanges, ViewChild, ViewChildren, } from '@angular/core';
import { Flip } from 'number-flip';
var ComponentsComponent = /** @class */ (function () {
    function ComponentsComponent(renderer, cdr) {
        this.renderer = renderer;
        this.cdr = cdr;
        this.content = [
            {
                title: 'Design, Tierstudien',
                value: 152,
                text: 'Für die EU bei der European Medicines Agency (EMA)',
                backgroundColor: '#0F6292',
            },
            {
                title: 'Erprobung in vergleichenden Studien mit Freiwilligen',
                header: 'Phase I',
                value: 16,
                list: ['ca. 10-30 Freiwillige', 'Zur prüfen: Verträglichkeit'],
                backgroundColor: '#1682C3',
            },
            {
                title: 'Erprobung in vergleichenden Studien mit Freiwilligen',
                header: 'Phase II',
                value: 10,
                list: [
                    'ca. 50-500 Freiwillige',
                    'Zur prüfen: Dosierung, Immunantwort vor Ansteckung',
                ],
                backgroundColor: '#1682C3',
            },
            {
                title: 'Erprobung in vergleichenden Studien mit Freiwilligen',
                header: 'Phase III',
                value: 6,
                list: [
                    'ca. 1.000-60.000 Freiwillige',
                    'Zur prüfen: Zuverlässigkeit des Schutzes',
                ],
                backgroundColor: '#1682C3',
            },
            {
                title: 'Zulassungsverfahren',
                value: 0,
                text: 'Für die EU bei der European Medicines Agency (EMA)',
                backgroundColor: '#48BFFB',
            },
        ];
        this.activeIdx = 0;
        this.lastIdx = 0;
        this.title = 'vrm';
    }
    ComponentsComponent.prototype.ngOnInit = function () { };
    ComponentsComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if (this.values) {
            this.values.forEach(function (value, idx) {
                _this.content[idx].value = value;
            });
        }
    };
    ComponentsComponent.prototype.ngAfterViewInit = function () {
        this.flipper = new Flip({
            node: this.number.nativeElement,
            from: this.content[0].value,
            delay: 1,
        });
        this.setActive(0);
    };
    ComponentsComponent.prototype.setActive = function (idx) {
        this.lastIdx = this.activeIdx;
        this.activeIdx = idx;
        var rotation = (360 / this.content.length) * this.activeIdx;
        var difference = this.lastIdx - this.activeIdx;
        if (difference < 0) {
            difference = difference * -1;
        }
        var animationDuration = 1000 + 300 * difference;
        var plane = this.planeWrap.nativeElement;
        var path = this.ringBg.nativeElement;
        var length = path.getTotalLength();
        this.renderer.setStyle(plane, 'transition', animationDuration + 'ms all cubic-bezier(0.645, 0.045, 0.355, 1)');
        this.renderer.setStyle(plane, 'transform', 'translateY(-50%) rotate(' + rotation + 'deg)');
        this.renderer.setStyle(path, 'transition', animationDuration + 'ms all cubic-bezier(0.645, 0.045, 0.355, 1)');
        this.renderer.setStyle(path, 'stroke-dasharray', length);
        this.renderer.setStyle(path, 'stroke-dashoffset', length - (length / this.content.length) * this.activeIdx);
        this.flipper.flipTo({ to: this.content[this.activeIdx].value });
        var height = this.steps.toArray()[this.activeIdx].nativeElement
            .scrollHeight;
        this.renderer.setStyle(this.recruitmentText.nativeElement, 'height', height + 'px');
        this.renderer.setStyle(this.recruitmentText.nativeElement, 'background-color', this.content[this.activeIdx].backgroundColor);
        this.renderer.setStyle(this.arrow.nativeElement, 'fill', this.content[this.activeIdx].backgroundColor);
        this.cdr.detectChanges();
    };
    ComponentsComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ChangeDetectorRef }
    ]; };
    __decorate([
        Input()
    ], ComponentsComponent.prototype, "values", void 0);
    __decorate([
        ViewChild('ringBg')
    ], ComponentsComponent.prototype, "ringBg", void 0);
    __decorate([
        ViewChild('planeWrap')
    ], ComponentsComponent.prototype, "planeWrap", void 0);
    __decorate([
        ViewChild('recruitmentText')
    ], ComponentsComponent.prototype, "recruitmentText", void 0);
    __decorate([
        ViewChild('centerWipe')
    ], ComponentsComponent.prototype, "centerWipe", void 0);
    __decorate([
        ViewChild('number')
    ], ComponentsComponent.prototype, "number", void 0);
    __decorate([
        ViewChild('arrow')
    ], ComponentsComponent.prototype, "arrow", void 0);
    __decorate([
        ViewChildren('steps')
    ], ComponentsComponent.prototype, "steps", void 0);
    ComponentsComponent = __decorate([
        Component({
            selector: 'vrm-slider',
            template: "<section class=\"recruitment-process\">\n    <div class=\"grid\"></div>\n    <div class=\"grid\">\n  \n      <div class=\"recruitment-wrap\">\n        <div class=\"plane\">\n          <div\n            #planeWrap\n            [class.reverse]=\"lastIdx > activeIdx\"\n            class=\"plane-wrap\">\n            <svg\n             \n              id=\"arrow\"\n              width=\"60\"\n              height=\"60\"\n              viewBox=\"0 0 60 60\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\">\n              <path  #arrow d=\"M-2.62268e-06 60L60 30L0 -2.62268e-06L7 30L-2.62268e-06 60Z\"></path>\n            </svg>\n  \n          </div>\n        </div>\n  \n        <div class=\"center\">\n          <div\n            #centerWipe\n            class=\"center-wipe\"></div>\n          <div class=\"center-imgs\">\n            <!-- *ngFor=\"let item of content; let idx = index\" -->\n            <div class=\"center-img\">\n              <div #number></div>\n              <div class=\"hint\">Anzahl Studien</div>\n            </div>\n          </div>\n        </div>\n        <div class=\"ring\">\n          <svg>\n            <circle\n              #ringBg\n              class=\"ring-bg animate\"\n              cx=\"50%\"\n              cy=\"50%\"\n              r=\"200\"></circle>\n            <circle\n              class=\"dash\"\n              cx=\"50%\"\n              cy=\"50%\"\n              r=\"200\"></circle>\n          </svg>\n        </div>\n        <div class=\"point-wrap\">\n          <!-- transform: rotate(#{(-360 / 5) * $i}deg), -->\n          <div\n            class=\"point\"\n            (click)=\"setActive(idx)\"\n            [class.active]=\"idx === activeIdx\"\n            [style.transform]=\"'translateY(-50%) rotate(' +((360 / 5) * (idx)) + 'deg)'\"\n            *ngFor=\"let item of content; let idx = index\">\n            <div\n              class=\"point-inner\"\n              [style.transform]=\"' rotate('+ ((-360 / 5) * idx) +'deg)'\"\n              \n              >\n              <div class=\"point-transform\">\n                <span>{{ idx + 1 }}</span>\n              </div>\n            </div>\n          </div>\n  \n        </div>\n      </div>\n  \n      <div\n        #recruitmentText\n        class=\"recruitment-text\" >\n        <div class=\"recruitment-copy\">\n          <div\n            class=\"step\"\n            #steps\n            [class.active]=\"idx === activeIdx\"\n            *ngFor=\"let item of content; let idx = index\">\n            <h3>{{ item.title }}</h3>\n            <h4 *ngIf=\"item.header\">{{ item.header }}</h4>\n            <p>{{ item.text}}</p>\n            <ul *ngIf=\"item.list && item.list.length > 0\">\n              <li *ngFor=\"let entry of item.list\">{{ entry }}</li>\n            </ul>\n          </div>\n        </div>\n        <div class=\"recruitment-controls\">\n          <div\n            class=\"arrow prev\"\n            (click)=\"activeIdx === 0 ? setActive(content.length - 1) :setActive(activeIdx -1)\"></div>\n          <div class=\"dots\">\n            <div\n              class=\"dot\"\n              (click)=\"setActive(idx)\"\n              [class.active]=\"idx === activeIdx\"\n              *ngFor=\"let item of content; let idx  = index\"></div>\n          </div>\n          <div\n            class=\"arrow next\"\n            (click)=\"activeIdx + 1 > content.length - 1 ? setActive(0) : setActive(activeIdx+1)\"></div>\n        </div>\n      </div>\n    </div>\n  </section>\n  ",
            styles: ["@import url(https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap);:host{font-family:\"Open Sans\",sans-serif}:host *{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host::ng-deep .number-flip .digit{background:#3c78c7;margin:2px;padding:0 8px;border-radius:5px;position:relative}:host section{width:100%;position:relative}:host .recruitment-process{width:100%;position:relative;padding:50px 0;display:inline-block}:host .recruitment-process .grid{width:1200px;position:relative;margin:0 auto}:host .recruitment-process .grid .grid-left{position:relative;width:400px;float:left}@media only screen and (max-width:1260px){:host .recruitment-process .grid{padding:0 30px;width:100%}}@media only screen and (max-width:578px){:host .recruitment-process .grid{padding:0 25px}}:host .recruitment-text{width:calc(100% - 500px);position:relative;float:right;background-color:#3c78c7;border-radius:10px;overflow:hidden;box-shadow:0 25px 40px rgba(0,0,0,.3);transition:.5s;color:#fff}:host .recruitment-text .recruitment-copy{width:100%;position:relative}:host .recruitment-text .recruitment-copy .step{width:100%;position:absolute;top:0;left:0;padding:60px 70px 120px}:host .recruitment-text .recruitment-copy .step>*{visibility:hidden;opacity:0;transform:translateX(-50px);transition:1s}:host .recruitment-text .recruitment-copy .step>:nth-child(2){transition-delay:.1s}:host .recruitment-text .recruitment-copy .step.active>*{visibility:visible;opacity:1;transform:translateX(0)}:host .recruitment-text .recruitment-copy .step.next>*{visibility:hidden;opacity:0;transform:translateX(50px)}:host .recruitment-text .recruitment-copy .step h3,:host .recruitment-text .recruitment-copy .step p{margin:0}:host .recruitment-text .recruitment-copy .step h3{font-weight:500;font-size:24px;margin-bottom:20px}:host .recruitment-text .recruitment-copy .step p,:host .recruitment-text .recruitment-copy .step ul{font-size:16px;line-height:24px}:host .recruitment-text .recruitment-controls{width:100%;height:80px;background-color:#efefef;position:absolute;bottom:0;left:0;display:flex;align-items:center;justify-content:center;border-radius:0 0 10px 10px}:host .recruitment-text .recruitment-controls .arrow{width:16px;height:16px;border-top:3px solid #3c78c7;border-left:3px solid #3c78c7;transform:rotate(-45deg);transition:.3s;cursor:pointer}:host .recruitment-text .recruitment-controls .arrow:hover{border-color:#737373}:host .recruitment-text .recruitment-controls .arrow.next{transform:rotate(135deg)}:host .recruitment-text .recruitment-controls .dots{margin:0 10px;position:relative}:host .recruitment-text .recruitment-controls .dots .dot{width:16px;height:16px;background-color:#e6e6e6;border-radius:50%;position:relative;float:left;margin:0 5px;transition:.3s;cursor:pointer}:host .recruitment-text .recruitment-controls .dots .dot:hover{background-color:silver}:host .recruitment-text .recruitment-controls .dots .dot.active{background-color:#3c78c7}@media only screen and (max-width:1260px){:host .recruitment-text .recruitment-copy .step{padding:40px 40px 100px}:host .recruitment-text .recruitment-controls{height:70px}:host .recruitment-wrap{margin-left:20px}}@media only screen and (max-width:1000px){:host .recruitment-text{width:calc(100% - 375px)}:host .recruitment-text .recruitment-copy .step{padding:30px 30px 70px}:host .recruitment-text .recruitment-copy .step h3{font-size:22px;margin-bottom:16px}:host .recruitment-text .recruitment-copy .step p{font-size:14px}:host .recruitment-text .recruitment-controls{height:50px}}@media only screen and (max-width:768px){:host .recruitment-text{width:100%}}:host .recruitment-wrap{width:400px;height:400px;position:relative;float:left;margin-bottom:50px}:host .recruitment-wrap .plane{position:absolute;width:100%;height:100%;display:flex;justify-content:center;z-index:5;pointer-events:none}:host .recruitment-wrap .plane .plane-wrap{height:60px;display:inline-block;transform-origin:50% 230px;transform:translateY(-50%) rotate(0);transition:1s cubic-bezier(.645,.045,.355,1)}:host .recruitment-wrap .plane .plane-wrap.reverse img,:host .recruitment-wrap .plane .plane-wrap.reverse svg{transform:scaleX(-1)}:host .recruitment-wrap .plane .plane-wrap.shadow img,:host .recruitment-wrap .plane .plane-wrap.shadow svg{filter:drop-shadow(0 -15px 0 rgba(0, 0, 0, .1))}:host .recruitment-wrap .plane .plane-wrap img,:host .recruitment-wrap .plane .plane-wrap svg{position:relative;top:0;height:60px;transition:.5s cubic-bezier(.645,.045,.355,1);filter:drop-shadow(0 15px 0 rgba(0, 0, 0, .1))}:host .recruitment-wrap .plane .plane-wrap svg path{fill:#3c78c7;transition:fill 1s cubic-bezier(.645,.045,.355,1)}:host .recruitment-wrap .center{position:absolute;height:60%;width:60%;z-index:2;overflow:hidden;display:flex;align-items:center;justify-content:center;left:50%;top:50%;transform:translate(-50%,-50%)}:host .recruitment-wrap .center:before{content:\"\";width:102%;height:102%;position:absolute;border-radius:50%;z-index:10}:host .recruitment-wrap .center .center-imgs{width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;z-index:1}:host .recruitment-wrap .center .center-imgs .center-img{width:110%;height:110%;position:absolute;z-index:1;display:flex;justify-content:center;align-items:center;font-size:5em;color:#fff;flex-direction:column}:host .recruitment-wrap .center .center-imgs .center-img .hint{font-size:17px;color:#3c78c7;margin-top:20px;font-weight:600}:host .recruitment-wrap .center .center-imgs .center-img.active{z-index:2}:host .recruitment-wrap .center .center-imgs .center-img.active:after{transition:10s cubic-bezier(.23,1,.32,1);transform:scale(1)}:host .recruitment-wrap .center .center-imgs .center-img:after{content:\"\";position:absolute;width:100%;height:100%;background-size:cover;background-position:center;transition:none;transform:scale(.9)}:host .recruitment-wrap .center .center-wipe{width:100%;height:100%;position:absolute;z-index:2;background-image:url(http://res.cloudinary.com/da32ibrgl/image/upload/v1517306495/sprite-v2_bsi2cx.png);background-size:auto 100%;background-position:0 0}:host .recruitment-wrap .ring{position:absolute;width:100%;height:100%;z-index:1;border-radius:50%;display:flex;justify-content:center;align-items:center;transform:rotate(-90deg)}:host .recruitment-wrap .ring svg{width:100%;height:100%;position:absolute;z-index:1;top:0;left:0;overflow:visible}:host .recruitment-wrap .ring svg circle{width:100%;height:100%;stroke-width:2;fill:none;stroke:#3c78c7}:host .recruitment-wrap .ring svg circle.animate{transition:1s cubic-bezier(.645,.045,.355,1)}:host .recruitment-wrap .ring svg circle.dash{opacity:.2;stroke-dasharray:10,10}:host .recruitment-wrap .point-wrap{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:3}:host .recruitment-wrap .point-wrap .point{width:30px;height:30px;position:absolute;border-radius:50%;display:flex;justify-content:center;top:0;cursor:pointer;align-items:center;transform-origin:50% 215px}:host .recruitment-wrap .point-wrap .point .point-inner{width:100%;height:100%;position:relative}:host .recruitment-wrap .point-wrap .point .point-inner .point-transform{background-color:#3c78c7;width:100%;height:100%;display:flex;justify-content:center;align-items:center;border-radius:50%;transition:.6s;box-shadow:0 5px 20px rgba(0,0,0,.3)}:host .recruitment-wrap .point-wrap .point .point-inner .point-transform span{position:relative;margin-top:1px;font-size:16px;display:block;transition:.6s;color:#fff}:host .recruitment-wrap .point-wrap .point:hover .point-transform{background-color:#333}:host .recruitment-wrap .point-wrap .point:hover .point-transform span{color:#fff}:host .recruitment-wrap .point-wrap .point.active .point-transform{transform:scale(.3);background-color:#333}:host .recruitment-wrap .point-wrap .point.active .point-transform span{color:#fff;opacity:0}@media only screen and (max-width:1000px){:host .recruitment-wrap{width:320px;height:320px}:host .recruitment-wrap circle{transform-origin:50% 50%;transform:scale(.8)}:host .recruitment-wrap .plane .plane-wrap{height:40px;transform-origin:50% 180px}:host .recruitment-wrap .plane .plane-wrap img,:host .recruitment-wrap .plane .plane-wrap svg{height:40px}:host .recruitment-wrap .point-wrap .point{width:40px;height:40px;transform-origin:50% 180px}}@media only screen and (max-width:768px){:host .recruitment-wrap{left:50%;margin:0 0 30px;transform:translateX(-50%)}}"]
        })
    ], ComponentsComponent);
    return ComponentsComponent;
}());
export { ComponentsComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50cy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9jb21wb25lbnRzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQ0wsYUFBYSxFQUNiLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsVUFBVSxFQUNWLEtBQUssRUFDTCxNQUFNLEVBQ04sU0FBUyxFQUNULFNBQVMsRUFDVCxhQUFhLEVBQ2IsU0FBUyxFQUNULFlBQVksR0FDYixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBT25DO0lBMERFLDZCQUFvQixRQUFtQixFQUFVLEdBQXNCO1FBQW5ELGFBQVEsR0FBUixRQUFRLENBQVc7UUFBVSxRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQXZEaEUsWUFBTyxHQUFHO1lBQ2Y7Z0JBQ0UsS0FBSyxFQUFFLHFCQUFxQjtnQkFDNUIsS0FBSyxFQUFFLEdBQUc7Z0JBQ1YsSUFBSSxFQUFFLG9EQUFvRDtnQkFDMUQsZUFBZSxFQUFFLFNBQVM7YUFDM0I7WUFDRDtnQkFDRSxLQUFLLEVBQUUsc0RBQXNEO2dCQUM3RCxNQUFNLEVBQUUsU0FBUztnQkFDakIsS0FBSyxFQUFFLEVBQUU7Z0JBQ1QsSUFBSSxFQUFFLENBQUMsdUJBQXVCLEVBQUUsNkJBQTZCLENBQUM7Z0JBQzlELGVBQWUsRUFBRSxTQUFTO2FBQzNCO1lBQ0Q7Z0JBQ0UsS0FBSyxFQUFFLHNEQUFzRDtnQkFDN0QsTUFBTSxFQUFFLFVBQVU7Z0JBQ2xCLEtBQUssRUFBRSxFQUFFO2dCQUNULElBQUksRUFBRTtvQkFDSix3QkFBd0I7b0JBQ3hCLG9EQUFvRDtpQkFDckQ7Z0JBQ0QsZUFBZSxFQUFFLFNBQVM7YUFDM0I7WUFDRDtnQkFDRSxLQUFLLEVBQUUsc0RBQXNEO2dCQUM3RCxNQUFNLEVBQUUsV0FBVztnQkFDbkIsS0FBSyxFQUFFLENBQUM7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QW5CLFNBQVMsQ0FBQyxPQUFPLENBQUM7c0RBQW1CO0lBQ2Y7UUFBdEIsWUFBWSxDQUFDLE9BQU8sQ0FBQztzREFBOEI7SUF2RHpDLG1CQUFtQjtRQUwvQixTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsWUFBWTtZQUN0Qiw2OUdBQTBDOztTQUUzQyxDQUFDO09BQ1csbUJBQW1CLENBK0kvQjtJQUFELDBCQUFDO0NBQUEsQUEvSUQsSUErSUM7U0EvSVksbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgSW5wdXQsXG4gIE9uSW5pdCxcbiAgUXVlcnlMaXN0LFxuICBSZW5kZXJlcjIsXG4gIFNpbXBsZUNoYW5nZXMsXG4gIFZpZXdDaGlsZCxcbiAgVmlld0NoaWxkcmVuLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgRmxpcCB9IGZyb20gJ251bWJlci1mbGlwJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndnJtLXNsaWRlcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9jb21wb25lbnRzLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vY29tcG9uZW50cy5jb21wb25lbnQuc2NzcyddLFxufSlcbmV4cG9ydCBjbGFzcyBDb21wb25lbnRzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcbiAgQElucHV0KCkgdmFsdWVzOiBudW1iZXJbXTtcblxuICBwdWJsaWMgY29udGVudCA9IFtcbiAgICB7XG4gICAgICB0aXRsZTogJ0Rlc2lnbiwgVGllcnN0dWRpZW4nLFxuICAgICAgdmFsdWU6IDE1MixcbiAgICAgIHRleHQ6ICdGw7xyIGRpZSBFVSBiZWkgZGVyIEV1cm9wZWFuIE1lZGljaW5lcyBBZ2VuY3kgKEVNQSknLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzBGNjI5MicsXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogJ0VycHJvYnVuZyBpbiB2ZXJnbGVpY2hlbmRlbiBTdHVkaWVuIG1pdCBGcmVpd2lsbGlnZW4nLFxuICAgICAgaGVhZGVyOiAnUGhhc2UgSScsXG4gICAgICB2YWx1ZTogMTYsXG4gICAgICBsaXN0OiBbJ2NhLiAxMC0zMCBGcmVpd2lsbGlnZScsICdadXIgcHLDvGZlbjogVmVydHLDpGdsaWNoa2VpdCddLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzE2ODJDMycsXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogJ0VycHJvYnVuZyBpbiB2ZXJnbGVpY2hlbmRlbiBTdHVkaWVuIG1pdCBGcmVpd2lsbGlnZW4nLFxuICAgICAgaGVhZGVyOiAnUGhhc2UgSUknLFxuICAgICAgdmFsdWU6IDEwLFxuICAgICAgbGlzdDogW1xuICAgICAgICAnY2EuIDUwLTUwMCBGcmVpd2lsbGlnZScsXG4gICAgICAgICdadXIgcHLDvGZlbjogRG9zaWVydW5nLCBJbW11bmFudHdvcnQgdm9yIEFuc3RlY2t1bmcnLFxuICAgICAgXSxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJyMxNjgyQzMnLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6ICdFcnByb2J1bmcgaW4gdmVyZ2xlaWNoZW5kZW4gU3R1ZGllbiBtaXQgRnJlaXdpbGxpZ2VuJyxcbiAgICAgIGhlYWRlcjogJ1BoYXNlIElJSScsXG4gICAgICB2YWx1ZTogNixcbiAgICAgIGxpc3Q6IFtcbiAgICAgICAgJ2NhLiAxLjAwMC02MC4wMDAgRnJlaXdpbGxpZ2UnLFxuICAgICAgICAnWnVyIHByw7xmZW46IFp1dmVybMOkc3NpZ2tlaXQgZGVzIFNjaHV0emVzJyxcbiAgICAgIF0sXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMTY4MkMzJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiAnWnVsYXNzdW5nc3ZlcmZhaHJlbicsXG4gICAgICB2YWx1ZTogMCxcbiAgICAgIHRleHQ6ICdGw7xyIGRpZSBFVSBiZWkgZGVyIEV1cm9wZWFuIE1lZGljaW5lcyBBZ2VuY3kgKEVNQSknLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzQ4QkZGQicsXG4gICAgfSxcbiAgXTtcblxuICBwdWJsaWMgYWN0aXZlSWR4ID0gMDtcbiAgcHVibGljIGxhc3RJZHggPSAwO1xuICBwcml2YXRlIGZsaXBwZXI7XG5cbiAgQFZpZXdDaGlsZCgncmluZ0JnJykgcmluZ0JnOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdwbGFuZVdyYXAnKSBwbGFuZVdyYXA6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ3JlY3J1aXRtZW50VGV4dCcpIHJlY3J1aXRtZW50VGV4dDogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgnY2VudGVyV2lwZScpIGNlbnRlcldpcGU6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ251bWJlcicpIG51bWJlcjogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgnYXJyb3cnKSBhcnJvdzogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZHJlbignc3RlcHMnKSBzdGVwczogUXVlcnlMaXN0PEVsZW1lbnRSZWY+O1xuICB0aXRsZSA9ICd2cm0nO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMiwgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmKSB7fVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge31cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudmFsdWVzKSB7XG4gICAgICB0aGlzLnZhbHVlcy5mb3JFYWNoKCh2YWx1ZSwgaWR4KSA9PiB7XG4gICAgICAgIHRoaXMuY29udGVudFtpZHhdLnZhbHVlID0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XG4gICAgdGhpcy5mbGlwcGVyID0gbmV3IEZsaXAoe1xuICAgICAgbm9kZTogdGhpcy5udW1iZXIubmF0aXZlRWxlbWVudCxcbiAgICAgIGZyb206IHRoaXMuY29udGVudFswXS52YWx1ZSxcbiAgICAgIGRlbGF5OiAxLCAvLyBzZWNvbmRcbiAgICB9KTtcbiAgICB0aGlzLnNldEFjdGl2ZSgwKTtcbiAgfVxuXG4gIHNldEFjdGl2ZShpZHgpIHtcbiAgICB0aGlzLmxhc3RJZHggPSB0aGlzLmFjdGl2ZUlkeDtcbiAgICB0aGlzLmFjdGl2ZUlkeCA9IGlkeDtcblxuICAgIGNvbnN0IHJvdGF0aW9uID0gKDM2MCAvIHRoaXMuY29udGVudC5sZW5ndGgpICogdGhpcy5hY3RpdmVJZHg7XG5cbiAgICBsZXQgZGlmZmVyZW5jZSA9IHRoaXMubGFzdElkeCAtIHRoaXMuYWN0aXZlSWR4O1xuXG4gICAgaWYgKGRpZmZlcmVuY2UgPCAwKSB7XG4gICAgICBkaWZmZXJlbmNlID0gZGlmZmVyZW5jZSAqIC0xO1xuICAgIH1cblxuICAgIGNvbnN0IGFuaW1hdGlvbkR1cmF0aW9uID0gMTAwMCArIDMwMCAqIGRpZmZlcmVuY2U7XG4gICAgY29uc3QgcGxhbmUgPSB0aGlzLnBsYW5lV3JhcC5uYXRpdmVFbGVtZW50O1xuICAgIGNvbnN0IHBhdGggPSB0aGlzLnJpbmdCZy5uYXRpdmVFbGVtZW50O1xuICAgIGNvbnN0IGxlbmd0aCA9IHBhdGguZ2V0VG90YWxMZW5ndGgoKTtcblxuICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoXG4gICAgICBwbGFuZSxcbiAgICAgICd0cmFuc2l0aW9uJyxcbiAgICAgIGFuaW1hdGlvbkR1cmF0aW9uICsgJ21zIGFsbCBjdWJpYy1iZXppZXIoMC42NDUsIDAuMDQ1LCAwLjM1NSwgMSknXG4gICAgKTtcbiAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxuICAgICAgcGxhbmUsXG4gICAgICAndHJhbnNmb3JtJyxcbiAgICAgICd0cmFuc2xhdGVZKC01MCUpIHJvdGF0ZSgnICsgcm90YXRpb24gKyAnZGVnKSdcbiAgICApO1xuXG4gICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcbiAgICAgIHBhdGgsXG4gICAgICAndHJhbnNpdGlvbicsXG4gICAgICBhbmltYXRpb25EdXJhdGlvbiArICdtcyBhbGwgY3ViaWMtYmV6aWVyKDAuNjQ1LCAwLjA0NSwgMC4zNTUsIDEpJ1xuICAgICk7XG4gICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShwYXRoLCAnc3Ryb2tlLWRhc2hhcnJheScsIGxlbmd0aCk7XG5cbiAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxuICAgICAgcGF0aCxcbiAgICAgICdzdHJva2UtZGFzaG9mZnNldCcsXG4gICAgICBsZW5ndGggLSAobGVuZ3RoIC8gdGhpcy5jb250ZW50Lmxlbmd0aCkgKiB0aGlzLmFjdGl2ZUlkeFxuICAgICk7XG5cbiAgICB0aGlzLmZsaXBwZXIuZmxpcFRvKHsgdG86IHRoaXMuY29udGVudFt0aGlzLmFjdGl2ZUlkeF0udmFsdWUgfSk7XG5cbiAgICBjb25zdCBoZWlnaHQgPSB0aGlzLnN0ZXBzLnRvQXJyYXkoKVt0aGlzLmFjdGl2ZUlkeF0ubmF0aXZlRWxlbWVudFxuICAgICAgLnNjcm9sbEhlaWdodDtcblxuICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoXG4gICAgICB0aGlzLnJlY3J1aXRtZW50VGV4dC5uYXRpdmVFbGVtZW50LFxuICAgICAgJ2hlaWdodCcsXG4gICAgICBoZWlnaHQgKyAncHgnXG4gICAgKTtcbiAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxuICAgICAgdGhpcy5yZWNydWl0bWVudFRleHQubmF0aXZlRWxlbWVudCxcbiAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJyxcbiAgICAgIHRoaXMuY29udGVudFt0aGlzLmFjdGl2ZUlkeF0uYmFja2dyb3VuZENvbG9yXG4gICAgKTtcbiAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxuICAgICAgdGhpcy5hcnJvdy5uYXRpdmVFbGVtZW50LFxuICAgICAgJ2ZpbGwnLFxuICAgICAgdGhpcy5jb250ZW50W3RoaXMuYWN0aXZlSWR4XS5iYWNrZ3JvdW5kQ29sb3JcbiAgICApO1xuXG4gICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG59XG4iXX0=