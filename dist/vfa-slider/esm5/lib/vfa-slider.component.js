import { __awaiter, __decorate, __generator } from "tslib";
import { HttpClient, HttpHeaders } from '@angular/common/http';
import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, Input, OnChanges, OnInit, QueryList, Renderer2, SimpleChanges, ViewChild, ViewChildren, } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';
import Tick from '@pqina/flip';
import { ITEMS } from './vfa-slider.constants';
var httpOptions = {
    headers: new HttpHeaders({
        'Access-Control-Allow-Origin': '*',
    }),
};
var VfaSliderComponent = /** @class */ (function () {
    function VfaSliderComponent(renderer, cdr, sanitize, httpClient) {
        this.renderer = renderer;
        this.cdr = cdr;
        this.sanitize = sanitize;
        this.httpClient = httpClient;
        this.date = '04.09.2020';
        this.content = ITEMS;
        this.activeIdx = 0;
        this.lastIdx = 0;
        this.svgs = {
            plane: 'M7 30L0 -2.62268e-06L30 15L60 30L30 45L-2.62268e-06 60L7 30Z',
            arrow: 'M12 21L21.5 30L49 -4.5897e-07L59.5 12.5L20 55L-1.48619e-06 34L12 21Z',
        };
        this.title = 'vrm';
    }
    VfaSliderComponent.prototype.ngOnInit = function () {
        if (!this.values) {
            this.getData();
        }
    };
    VfaSliderComponent.prototype.getData = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.httpClient
                            .get('https://vfa.23d.gr/api/values', httpOptions)
                            .toPromise()];
                    case 1:
                        response = _a.sent();
                        response.values.forEach(function (value, idx) { return (_this.content[idx].value = value); });
                        this.date = response.date;
                        this.setActive(0);
                        return [2 /*return*/];
                }
            });
        });
    };
    VfaSliderComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if (this.values) {
            var values = this.values;
            if (typeof values === 'string') {
                values = JSON.parse(values);
            }
            if (Array.isArray(values)) {
                values.forEach(function (value, idx) {
                    if (value != null && value !== undefined) {
                        _this.content[idx].value = value;
                    }
                });
            }
            if (changes.values && !changes.values.isFirstChange()) {
                this.setActive(this.activeIdx);
            }
        }
        if (changes.date) {
            this.cdr.detectChanges();
        }
    };
    VfaSliderComponent.prototype.ngAfterViewInit = function () {
        this.flipper = Tick.DOM.create(this.number.nativeElement, {
            value: 0,
        });
        var arc = this.generateArc(200, 200, 200, 25, 335);
        console.log(arc);
        this.renderer.setAttribute(this.arc.nativeElement, 'd', arc);
        if (this.values) {
            this.setActive(0);
        }
    };
    VfaSliderComponent.prototype.setActive = function (idx) {
        this.lastIdx = this.activeIdx;
        this.activeIdx = idx;
        // const rotation = (360 / this.content.length) * this.activeIdx;
        var rotation = 360 - ((360 / this.content.length) * this.activeIdx + 25);
        var difference = this.lastIdx - this.activeIdx;
        if (difference < 0) {
            difference = difference * -1;
        }
        var animationDuration = 500 + 300 * difference;
        var plane = this.planeWrap.nativeElement;
        var path = this.ringBg.nativeElement;
        var length = path.getBoundingClientRect().height > 0 && path.getTotalLength
            ? path.getTotalLength()
            : 0;
        var opacityDelay = 0;
        if (this.activeIdx === this.content.length - 1) {
            opacityDelay = 300 * difference;
        }
        if (plane) {
            this.renderer.setStyle(plane, 'transition', animationDuration + "ms transform cubic-bezier(0.645, 0.045, 0.355, 1)");
            this.renderer.setStyle(plane, 'transform', 'translateY(-50%) rotate(' + rotation + 'deg)');
            this.renderer.setStyle(this.svgArrow.nativeElement, 'transition', "opacity 500ms " + opacityDelay + "ms cubic-bezier(0.645, 0.045, 0.355, 1)");
            // this.renderer.setStyle(
            //   this.svgCheck.nativeElement,
            //   'transition',
            //   `opacity 500ms ${opacityDelay}ms cubic-bezier(0.645, 0.045, 0.355, 1)`
            // );
            if (this.activeIdx === this.content.length - 1) {
                this.renderer.setStyle(this.svgArrow.nativeElement, 'opacity', '0');
                // this.renderer.setStyle(
                //   this.svgCheck.nativeElement,
                //   'opacity',
                //   '1'
                // );
            }
            else {
                this.renderer.setStyle(this.svgArrow.nativeElement, 'opacity', '1');
                // this.renderer.setStyle(
                //   this.svgCheck.nativeElement,
                //   'opacity',
                //   '0'
                // );
            }
        }
        if (path) {
            this.renderer.setStyle(path, 'transition', animationDuration + 'ms all cubic-bezier(0.645, 0.045, 0.355, 1)');
            this.renderer.setStyle(path, 'stroke-dasharray', length);
            this.renderer.setStyle(path, 'stroke-dashoffset', length - (length / this.content.length) * this.activeIdx);
        }
        this.flipper.value = this.content[this.activeIdx].value;
        // const height = this.steps.toArray()[this.activeIdx].nativeElement
        //   .scrollHeight;
        // this.renderer.setStyle(
        //   this.recruitmentText.nativeElement,
        //   'height',
        //   height + 'px'
        // );
        // this.renderer.setStyle(
        //   this.recruitmentText.nativeElement,
        //   'background-color',
        //   this.content[this.activeIdx].backgroundColor
        // );
        this.renderer.setStyle(this.section.nativeElement, 'background-color', this.content[this.activeIdx].backgroundColor);
        // let svgForm = this.svgs.plane;
        // this.svgAnimation.nativeElement.beginElement();
        // this.renderer.setAttribute(this.arrow.nativeElement, 'd', svgForm);
        this.cdr.detectChanges();
    };
    VfaSliderComponent.prototype.transform = function (idx) {
        return this.sanitize.bypassSecurityTrustStyle('translateY(-50%) rotate(' +
            (360 - ((360 / this.content.length) * idx + 25)) +
            'deg)');
    };
    VfaSliderComponent.prototype.transformInner = function (idx) {
        var scale = '';
        if (idx === this.activeIdx && idx === this.content.length - 1) {
            scale = ' scale(1.2)';
        }
        return this.sanitize.bypassSecurityTrustStyle('rotate(' + (360 - ((-360 / this.content.length) * idx - 25)) + 'deg)' + scale);
    };
    VfaSliderComponent.prototype.generateArc = function (x, y, radius, startAngle, endAngle) {
        var start = this.polarToCartesian(x, y, radius, endAngle);
        var end = this.polarToCartesian(x, y, radius, startAngle);
        var largeArcFlag = endAngle - startAngle <= 180 ? '0' : '1';
        var d = [
            'M',
            start.x,
            start.y,
            'A',
            radius,
            radius,
            0,
            largeArcFlag,
            0,
            end.x,
            end.y,
        ].join(' ');
        return d;
    };
    VfaSliderComponent.prototype.polarToCartesian = function (centerX, centerY, radius, angleInDegrees) {
        var angleInRadians = ((angleInDegrees - 90) * Math.PI) / 180.0;
        return {
            x: centerX + radius * Math.cos(angleInRadians),
            y: centerY + radius * Math.sin(angleInRadians),
        };
    };
    VfaSliderComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ChangeDetectorRef },
        { type: DomSanitizer },
        { type: HttpClient }
    ]; };
    __decorate([
        Input()
    ], VfaSliderComponent.prototype, "values", void 0);
    __decorate([
        Input()
    ], VfaSliderComponent.prototype, "date", void 0);
    __decorate([
        ViewChild('section')
    ], VfaSliderComponent.prototype, "section", void 0);
    __decorate([
        ViewChild('ringBg')
    ], VfaSliderComponent.prototype, "ringBg", void 0);
    __decorate([
        ViewChild('planeWrap')
    ], VfaSliderComponent.prototype, "planeWrap", void 0);
    __decorate([
        ViewChild('recruitmentText')
    ], VfaSliderComponent.prototype, "recruitmentText", void 0);
    __decorate([
        ViewChild('number')
    ], VfaSliderComponent.prototype, "number", void 0);
    __decorate([
        ViewChild('arrow')
    ], VfaSliderComponent.prototype, "arrow", void 0);
    __decorate([
        ViewChild('svgArrow')
    ], VfaSliderComponent.prototype, "svgArrow", void 0);
    __decorate([
        ViewChild('svgCheck')
    ], VfaSliderComponent.prototype, "svgCheck", void 0);
    __decorate([
        ViewChild('arc')
    ], VfaSliderComponent.prototype, "arc", void 0);
    __decorate([
        ViewChildren('steps')
    ], VfaSliderComponent.prototype, "steps", void 0);
    VfaSliderComponent = __decorate([
        Component({
            selector: 'vfa-slider',
            template: "<section\n  class=\"recruitment-process\"\n  #section>\n  <div class=\"container\">\n\n    <div class=\"recruitment-wrap\">\n      <div class=\"plane\">\n        <div\n          #planeWrap\n          style=\"position: relative;\"\n          class=\"plane-wrap reverse\">\n          <svg\n            id=\"arrow\"\n            #svgArrow\n            width=\"40\"\n            height=\"40\"\n            viewBox=\"0 0 60 60\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              #arrow\n              [attr.d]=\"svgs.plane\">\n\n            </path>\n          </svg>\n          <svg\n            id=\"check\"\n            style=\"position: absolute; top: 50%; left: 50%; transform: translate(-52%, -52%) rotate(-20deg)\"\n            #svgCheck\n            width=\"40\"\n            height=\"40\"\n            viewBox=\"0 0 60 60\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              #arrow\n              [attr.d]=\"svgs.arrow\">\n\n            </path>\n          </svg>\n        </div>\n      </div>\n\n      <div class=\"center\">\n        <div class=\"center-imgs\">\n          <!-- *ngFor=\"let item of content; let idx = index\" -->\n          <div class=\"center-img\">\n            <div #number>\n              <div\n                data-repeat=\"true\"\n                data-transform=\"arrive(4, 0.01, false, false) -> round ->  pad('000') -> split -> delay(rtl, 10, 20)\">\n                <span data-view=\"flip\"></span>\n              </div>\n\n            </div>\n            <div class=\"hint\">Studien</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"ring\">\n        <svg>\n          <circle\n            #ringBg\n            class=\"ring-bg animate\"\n            style=\"stroke-dashoffset:1256px; stroke-dasharray: 1256px;\"\n            cx=\"50%\"\n            cy=\"50%\"\n            r=\"200\"></circle>\n          <!-- <circle\n            class=\"dash\"\n            cx=\"50%\"\n            cy=\"50%\"\n            r=\"200\"></circle> -->\n          <path\n            class=\"dash\"\n            #arc></path>\n        </svg>\n      </div>\n      <div class=\"point-wrap\">\n        <!-- transform: rotate(#{(-360 / 5) * $i}deg), -->\n        <div\n          class=\"point\"\n          (click)=\"setActive(idx)\"\n          [class.active]=\"idx === activeIdx\"\n          *ngFor=\"let item of content; let idx = index\"\n          [style.transform]=\"transform(idx)\">\n          <div\n            class=\"point-inner\"\n            style=\"transition: transform 300ms ease\"\n            [style.transform]=\"transformInner(idx)\">\n            <div class=\"point-transform\">\n              <span>{{ idx + 1 }}</span>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n    <div\n      #recruitmentText\n      class=\"recruitment-text\">\n      <div class=\"recruitment-copy\">\n        <div\n          class=\"step\"\n          #steps\n          [class.next]=\"idx > activeIdx\"\n          [class.active]=\"idx === activeIdx\"\n          *ngFor=\"let item of content; let idx = index\">\n          <h3>{{ item.title }}</h3>\n          <h4 *ngIf=\"item.header\">{{ item.header }}</h4>\n          <p>{{ item.text}}</p>\n          <ul *ngIf=\"item.list && item.list.length > 0\">\n            <li *ngFor=\"let entry of item.list\">{{ entry }}</li>\n          </ul>\n        </div>\n      </div>\n      <div class=\"recruitment-controls\">\n        <div\n          class=\"arrow prev\"\n          (click)=\"activeIdx === 0 ? setActive(content.length - 1) :setActive(activeIdx -1)\"></div>\n        <div class=\"dots\">\n          <div\n            class=\"dot\"\n            (click)=\"setActive(idx)\"\n            [class.active]=\"idx === activeIdx\"\n            *ngFor=\"let item of content; let idx  = index\"></div>\n        </div>\n        <div\n          class=\"arrow next\"\n          (click)=\"activeIdx + 1 > content.length - 1 ? setActive(0) : setActive(activeIdx+1)\"></div>\n      </div>\n    </div>\n\n  </div>\n  <div class=\"footer\">\n    <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAuCAMAAABam6YzAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAvFQTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////rkHhmgAAAPt0Uk5TAAwnAwll1P3/6BQauf4Gx/OjbQhy2j3RRiH16kFQv1cWAhUvNAcTCsMPDQEEHE5VRyqFsqFpKPhv5+PCYd8rIBIxYlTPERhw0PD73oALzn2P5bA8S+wfy5Ct9CJq/NygBSYkJRkAFx0OHiMuEClx1+vJkUWzdWCU2eSKO8zprLdC8UD37r7yZ5/mxbSo+co+4eLtmthIpmOlp4fNZH/GhLs3XKk49jCvXar6uJs1WZjdrnjSgZWJU2tR1XzAdlhNg3O8ndu6fr1JPy2Mq6Q5M5LgGzLIojZPTEOTLNOGdHq2jlZKW2ZeWoixxJbWnnlsgpmLaERuX5yNOndDNrQfAAAI70lEQVR4nO2ZaUBTVxbHj0mUS8TgTgmovECAkCDgAgYhYRFcWEZUVCJL2BfjhrWIErVBqFZZCqIOVlrrgmhxKaXSdGirFh0di0KxUrVqF1tHnel0xplO+2lOXhII5IGidrAz/j/k3XPuzX3nl/fOvee9ADzXcz3XE2oAi8Xu7xieXJyBgyyIJbe/w3hiDbYaQsj/AAjPGjGGDhs+or8DeVKNRI5Ro3/7GcKzQZAX+juKpyBbPiF2/R3E05A9XhDr/g7iaWgMgozt7yCehsb9P4M4UKaW4AUW1cNArmMPPRwnYR/P2SE2l8t1NpmW58zluoAexFUkErmJabfE3Wm8h4enlxvDFBMmTpw0WQTg7TPFNFip71RBDyf183dh7pDx5Y/BQCtAamkpDey0gywtLYNBD+Lj6+s7LQSN0OkzZhKdZoWFR5hNMTbyd7OjXCNAMGeuiXde9HzzoQb9GiCwAONb2GnGEKJYBHoQYihRYuNIp+Kdus8wNgFX6yFjKIFACTAiMYmnc7KDpMlKUCYlYsiSACrFJTXNKx2vvAsrSYkgGUmZaFBy7wwAoUiSJcedV5kkX6wDUS2Zj33OkoAlor6ALMXglnWaywlZITGASBMSErIHAKzES/HiqnEeL+VEo3d1MgMI5K4RxduthdA8td06/AqwZlosX5u2Plqd5wUs/+yoDR5qn5c1kDItP3+O0G9jgU/hKwCb1JtXe8P4V7f48GNBsrVIUYwgJaWvlU2QQGR5rsW2vtRH6bqbxt1oVaAxEKBrsrO37wjRtwJ2onsnE8ig34ODnQYqd3FE8a+D4YrsXhbBXr8TZGS2JqPqDUgRQsKbSu4e8Ct8i7duL+zbf4CKqQYPn4O8vTXgeEgjjOXLxYffhkCfWii1ygo85NUHELYrxnbEaB0lJG5wdxDgdYx2OEZIoYoJpBoECGJ1XCbLm63zBkeFwJZJAO9si5CRUIDjrhUCoOre1fXpcqS+Bt7ZXCt7Lww8sIJA6wSR6HIkpbRBJlMchNIGkPNlfQCBcAz5qNgQ8SBC6sAMxEQT0P8+A8jqTTRIcZlWq/3ACPKHekwwf4GM4PIlc7XYtdglrNEEJMcHB7saQfzy6WT3sotH74ePAbKnCMvcUH07MZ+Q93oF+Qj9H5uDcPJP0iCnjhq9OpDDp7GK/kREg+CC8GYTpQ03ATkTxtFZBpAPCaUDyfTdQH+/7yAuZwkZ8kd9OwgfQc71CqJBf7YZSGZC/nka5E8rlLBHaAR5dxkF6y4ADWKvhDeq4NP1wGs2gpTwvSEpxQhyMe68+AhfTp3F6ddSjwFCr1tr9M31WCkqewZRsmmQS91ACCma4SGmQeZPa1kW1qwHUUGr1agFgz6jQSRtvjbqcSAfdCz3MMcAQl22rJu51AgirF4+qqlQDvabtbnF7tAS22cQGcZWRYfPxbtsAjCCiNMqzhxf8TkTiFwm83bGo4SFO6CD5xVbOuEyEnFrUK2cl5IKQhku6AGa9xfj9pDS7hkCqmQKUnCl5Mw9EaiEDBbQlsrzC5W3EsRZYyoEqZAcAMolfStYxJjhGy/qWlcIsbBnBPFeswwdQw4ygTw7moLBrcKj+CohxYYdowuI6mPc2y1K151c9GyDXDtEyIt45NZ13FldQELa0Lg+jy4Yn2kQHgIUKgE2YJDGus8EJLUab6ovDZviMw0CNzC6MfTWaGncxE1A5lkQ0sQx+HsGEdxUMfqfULWxfRicOYSQy3SxUml0mYBsweZFo58BpFqtzr11/tFL8K8K8GN7eYctt+9tdIP20WalJdYSso3jGE0sSoyuThBOPCH8jvdbTPvIqfavrSMHPDLIaV0RdKumw75Z0NvoPoHAGtzTrp0kxLfjCaATRKAmpKVjJBMIlijfxHnL+Kxvp7QCuAWvClbCiH3KikRVrdvAtwYsvoHXk/3F0tuDu4Kw90WsvOEIgxOmaSLA+buRi/Fc5wO+DVlkKx/ugb9ca+yUJB2Ie8P3FDgfyAgaqHQauRZ/9sBV3+HCUysaPX1fd5CSoYTsnkjI1g5PJwgXQaIeBlKBIHEtBS0FIG6pqx76Fcjtztqt1AzVWhWO2tYWlw53XvvzJ1XsLiAR/nV5u9SCcWrF9ay0yLv3FPMgeHnY/czKsGNNhUH4A8b8RVELDUNbChR/hfboulMvr75eVZgJA2dmW09Vgfa+jXVcaDcQYTGG7U/ICQaQEXhrzep4amUCWSd3HBuWISv6Rnw7DCBLCHesEeSmQKkhgeKYWxm2/NEgEIFHlHM3kHChY1EyhON5fghLS90+jAou3BBCVZaGwpw1MCFSnPrql9AQFUodr4f2sna4HJPRSmRU1UJQHfIEbfaIrP1mNczfCFFbEDslAwhcwGZDbyD5duq7n9PJ/lIpgFf4jzMWIIhGNxhg7ySQK86BauTVs5YC95qaHSYgHiCblUiDXGppbKxyddNVmlCJWVHzd5ho09hos5XOkRoEifKC+noQEFm6b3Vjo+IfoGWsKkcfIrhy7e10mICcwwpM/cCQ7g+MIIPb6urC9SAX5PMzwAgiKP309hwzEM6mtn8ulOpAguD0dXOQ+tycnJxVHFOQptXo2mEOkiwtwI6SHkBEus3b4nVGELiH7bJ7V87Lvc9Nv2sEkSsIOa0HSaAPBhBPvi3sNgPJlFZgLPrXQzm++LG+K0hlMV1pmoIMm0OPNgMRxU+nO5hB4AMMsKWVGYSdrTB5jULKXukNpLnI3muFGUjKsYb0H9V6kI/ivj8whd8JcmaBO89TesT2X81dQL62c1o02dscBC6Pzbo23K0nECepVPqTiT0e7RijIV4yydJAoSj4Qb+Kph+TSv9Nt6r1OcPyT4dxeSDZUuh/1QrS7/8M8LMaoPwSuPs3iyfzl5e76pNdku0zq+mXcnDJGw+s3EXwIHrjZ9QvG/fnXoF2G1z/b04F+Gk3iC/x8+Pngh9ab9+BlTMS4c4dXEJZkDw132diKEz1g3R/lhnIwyR2cNJozgWmiR8+lMf4PpSSdLbZyq5duscOMQe6i+rpbZDwt///03M9139T/wEMAdJxlHwx3wAAAABJRU5ErkJggg==\">\n    <div class=\"note\">\n      <small>\n        Stand {{ date }}, Quelle WHO + Verband der forschenden Pharma-Unternehmen (vfa)\n      </small>\n    </div>\n  </div>\n</section>\n",
            styles: ["@import url(https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap);:host{display:block;width:100%;height:100%}:host *{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host section{width:100%;position:relative;font-family:\"Open Sans\",sans-serif}:host .recruitment-process{width:100%;position:relative;padding:50px 0;transition:.5s;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}:host .recruitment-process .container{width:100%;position:relative;margin:0 auto;display:grid;grid-template-columns:400px 1fr;grid-gap:50px;max-width:1200px;height:100%;align-items:center}:host .recruitment-process .container .grid-left{position:relative;width:400px;float:left}:host .recruitment-process .footer{width:100%;color:#fff;padding:0 60px;text-align:right}:host .recruitment-process .footer .note{margin-top:5px;opacity:.5}@media only screen and (max-width:768px){:host .recruitment-process .footer{margin-top:40px;text-align:center;padding:0 20px}}@media only screen and (max-width:1260px){:host .recruitment-process .container{padding:0 30px}}@media only screen and (max-width:1000px){:host .recruitment-process .container{grid-template-columns:320px 1fr;grid-gap:40px}}@media only screen and (max-width:768px){:host .recruitment-process .container{padding:0 30px;width:100%;grid-template-columns:1fr}}@media only screen and (max-width:578px){:host .recruitment-process .container{padding:0 25px;grid-gap:0}}:host .recruitment-text{position:relative;float:right;border-radius:10px;overflow:hidden;transition:.5s;color:#fff}:host .recruitment-text .recruitment-copy{width:100%;position:relative;height:360px}:host .recruitment-text .recruitment-copy .step{width:100%;position:absolute;bottom:0;left:0;padding:60px 70px 100px;height:100%;display:flex;flex-direction:column;justify-content:center}:host .recruitment-text .recruitment-copy .step>*{visibility:hidden;opacity:0;transform:translateX(-50px);transition:1s}:host .recruitment-text .recruitment-copy .step>:nth-child(2){transition-delay:.1s}:host .recruitment-text .recruitment-copy .step.active>*{visibility:visible;opacity:1;transform:translateX(0)}:host .recruitment-text .recruitment-copy .step.next>*{visibility:hidden;opacity:0;transform:translateX(50px)}:host .recruitment-text .recruitment-copy .step h3,:host .recruitment-text .recruitment-copy .step p{margin:0}:host .recruitment-text .recruitment-copy .step h3{font-weight:500;font-size:24px;margin-bottom:20px}:host .recruitment-text .recruitment-copy .step p,:host .recruitment-text .recruitment-copy .step ul{font-size:16px;line-height:24px}:host .recruitment-text .recruitment-copy .step ul{margin-bottom:0}@media only screen and (max-width:768px){:host .recruitment-text .recruitment-copy{height:250px}}:host .recruitment-text .recruitment-controls{width:100%;height:80px;position:absolute;bottom:0;left:0;display:flex;align-items:center;justify-content:center;border-radius:0 0 10px 10px}:host .recruitment-text .recruitment-controls .arrow{display:none;width:16px;height:16px;border-top:3px solid #fff;border-left:3px solid #fff;transform:rotate(-45deg);transition:.3s;cursor:pointer}:host .recruitment-text .recruitment-controls .arrow:hover{border-color:#737373}:host .recruitment-text .recruitment-controls .arrow.next{transform:rotate(135deg)}:host .recruitment-text .recruitment-controls .dots{margin:0 10px;position:relative}:host .recruitment-text .recruitment-controls .dots .dot{width:16px;height:16px;background-color:#e6e6e6;border-radius:50%;position:relative;float:left;margin:0 5px;transition:.3s;cursor:pointer;opacity:.5}:host .recruitment-text .recruitment-controls .dots .dot:hover{opacity:1}:host .recruitment-text .recruitment-controls .dots .dot.active{background-color:#fff;opacity:1;transform:scale(1.2)}@media only screen and (max-width:1260px){:host .recruitment-text .recruitment-copy .step{padding:40px 40px 100px}:host .recruitment-text .recruitment-controls{height:70px}:host .recruitment-wrap{margin-left:20px}}@media only screen and (max-width:1000px){:host .recruitment-text .recruitment-copy .step{padding:30px 30px 70px}:host .recruitment-text .recruitment-copy .step h3{font-size:22px;margin-bottom:16px}:host .recruitment-text .recruitment-copy .step p{font-size:14px}:host .recruitment-text .recruitment-controls{height:50px}}@media only screen and (max-width:768px){:host .recruitment-text{width:100%;display:flex;flex-direction:column;text-align:center}:host .recruitment-text .recruitment-copy .step{padding:30px 30px 73px;bottom:50%;transform:translateY(50%)}:host .recruitment-text ul{text-align:left}:host .recruitment-text .recruitment-controls{position:relative}}:host .recruitment-wrap{width:400px;height:400px;position:relative;float:left}:host .recruitment-wrap .plane{position:absolute;width:100%;height:100%;display:flex;justify-content:center;z-index:5;pointer-events:none}:host .recruitment-wrap .plane .plane-wrap{height:60px;display:inline-block;transform-origin:50% 230px;transform:translateY(-50%) rotate(0);transition:1s cubic-bezier(.645,.045,.355,1);position:relative}:host .recruitment-wrap .plane .plane-wrap.reverse img,:host .recruitment-wrap .plane .plane-wrap.reverse svg{transform:scaleX(-1)}:host .recruitment-wrap .plane .plane-wrap.shadow img,:host .recruitment-wrap .plane .plane-wrap.shadow svg{filter:drop-shadow(0 -15px 0 rgba(0, 0, 0, .1))}:host .recruitment-wrap .plane .plane-wrap img,:host .recruitment-wrap .plane .plane-wrap svg{position:relative;top:0;height:60px;transition:.5s cubic-bezier(.645,.045,.355,1);filter:drop-shadow(0 15px 0 rgba(0, 0, 0, .1))}:host .recruitment-wrap .plane .plane-wrap svg path{fill:#fff;transition:1s cubic-bezier(.645,.045,.355,1)}:host .recruitment-wrap .plane .plane-wrap #check{opacity:0}:host .recruitment-wrap .center{position:absolute;height:60%;width:60%;z-index:2;overflow:hidden;display:flex;align-items:center;justify-content:center;left:50%;top:50%;transform:translate(-50%,-50%)}:host .recruitment-wrap .center:before{content:\"\";width:102%;height:102%;position:absolute;border-radius:50%;z-index:10}:host .recruitment-wrap .center .center-imgs{width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;z-index:1}:host .recruitment-wrap .center .center-imgs .center-img{width:110%;height:110%;position:absolute;z-index:1;display:flex;justify-content:center;align-items:center;font-size:3em;color:#fff;flex-direction:column;padding-top:1em}:host .recruitment-wrap .center .center-imgs .center-img .hint{font-size:17px;margin-top:20px;font-weight:600}:host .recruitment-wrap .center .center-imgs .center-img.active{z-index:2}:host .recruitment-wrap .center .center-imgs .center-img.active:after{transition:10s cubic-bezier(.23,1,.32,1);transform:scale(1)}:host .recruitment-wrap .center .center-imgs .center-img:after{content:\"\";position:absolute;width:100%;height:100%;background-size:cover;background-position:center;transition:none;transform:scale(.9)}:host .recruitment-wrap .center .center-wipe{width:100%;height:100%;position:absolute;z-index:2;background-size:auto 100%;background-position:0 0}:host .recruitment-wrap .ring{position:absolute;width:100%;height:100%;z-index:1;border-radius:50%;display:flex;justify-content:center;align-items:center;transform:rotate(-115deg) scaleY(-1)}:host .recruitment-wrap .ring svg{width:100%;height:100%;position:absolute;z-index:1;top:0;left:0;overflow:visible}:host .recruitment-wrap .ring svg circle{width:100%;height:100%;stroke-width:3;fill:none;stroke:#fff}:host .recruitment-wrap .ring svg circle.animate{transition:1s cubic-bezier(.645,.045,.355,1)}:host .recruitment-wrap .ring svg path{stroke-width:3;fill:none;stroke:#fff;transform:rotate(-295deg);transform-origin:center}:host .recruitment-wrap .ring svg path.dash{opacity:.2;stroke-dasharray:10,10}:host .recruitment-wrap .point-wrap{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:3}:host .recruitment-wrap .point-wrap .point{width:36px;height:36px;position:absolute;border-radius:50%;display:flex;justify-content:center;top:0;cursor:pointer;align-items:center;transform-origin:50% 218px}:host .recruitment-wrap .point-wrap .point .point-inner{width:100%;height:100%;position:relative}:host .recruitment-wrap .point-wrap .point .point-inner .point-transform{background-color:#fff;width:100%;height:100%;display:flex;justify-content:center;align-items:center;border-radius:50%;transition:.6s;box-shadow:0 5px 20px rgba(0,0,0,.3)}:host .recruitment-wrap .point-wrap .point .point-inner .point-transform span{position:relative;margin-top:1px;font-size:16px;display:block;transition:.6s;color:#192e4d}:host .recruitment-wrap .point-wrap .point:hover .point-transform{background-color:#333}:host .recruitment-wrap .point-wrap .point:hover .point-transform span{color:#fff}:host .recruitment-wrap .point-wrap .point.active .point-transform{transform:scale(.3);background-color:#333}:host .recruitment-wrap .point-wrap .point.active .point-transform span{color:#fff;opacity:0}:host .recruitment-wrap .point-wrap .point:last-child::before{content:\"\";border-radius:100px;width:calc(100% + 20px);height:calc(100% + 20px);position:absolute;box-shadow:0 0 0 2px #fff;top:50%;left:50%;opacity:0;transform:translate(-50%,-50%) scale(.8);transition:450ms cubic-bezier(.645,.045,.355,1)}:host .recruitment-wrap .point-wrap .point:last-child.active .point-transform{transform:scale(1)}:host .recruitment-wrap .point-wrap .point:last-child.active .point-transform span{opacity:1}:host .recruitment-wrap .point-wrap .point:last-child.active::before{transform:translate(-50%,-50%) scale(1);opacity:1}@media only screen and (max-width:1000px){:host .recruitment-wrap{width:320px;height:320px}:host .recruitment-wrap circle{transform-origin:50% 50%;transform:scale(.8)}:host .recruitment-wrap .ring svg path.dash{transform-origin:50% 50%;transform:scale(.8) rotate(-295deg) translate(-40px,-40px)}:host .recruitment-wrap .plane .plane-wrap{height:40px;transform-origin:50% 180px}:host .recruitment-wrap .plane .plane-wrap img,:host .recruitment-wrap .plane .plane-wrap svg{height:40px}:host .recruitment-wrap .point-wrap .point{width:40px;height:40px;transform-origin:50% 180px}}@media only screen and (max-width:768px){:host .recruitment-wrap{left:50%;margin:30px 0 0;transform:translateX(-50%);height:180px}:host .recruitment-wrap .plane,:host .recruitment-wrap .point-wrap,:host .recruitment-wrap circle,:host .recruitment-wrap svg path.dash{display:none}}:host ::ng-deep .tick{box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default;position:relative;z-index:1;line-height:1.4}:host ::ng-deep .tick *{box-sizing:inherit}:host ::ng-deep .tick [data-view]{max-width:100%}:host ::ng-deep .tick span[data-view]{display:inline-block}:host ::ng-deep .tick [data-layout~=pad]{margin:-.25em}:host ::ng-deep .tick [data-layout~=pad]>*{margin:.25em}:host ::ng-deep .tick-flip{position:relative;text-align:center}:host ::ng-deep .tick-flip *{border-radius:inherit;white-space:pre;letter-spacing:inherit;text-indent:inherit}:host ::ng-deep .tick-flip-front{border-bottom-left-radius:0;border-bottom-right-radius:0}:host ::ng-deep .tick-flip-back{border-top-left-radius:0;border-top-right-radius:0}:host ::ng-deep .tick-flip-spacer{display:block;visibility:hidden}:host ::ng-deep .tick-flip-shadow{position:absolute;left:1px;right:1px;top:1px;bottom:1px;color:transparent!important;background:0 0!important}:host ::ng-deep .tick-flip-shadow-top{bottom:calc(50% - 1px)}:host ::ng-deep .tick-flip-shadow-bottom{top:calc(50% + 1px)}:host ::ng-deep .tick-flip-card-shadow{position:absolute;left:.15em;right:.15em;bottom:.125em;height:.5em;background-color:transparent;border-radius:0;opacity:0;transform-origin:0 100%;box-shadow:0 .125em .25em rgba(0,0,0,.5),0 .125em .5em rgba(0,0,0,.75);z-index:0}:host ::ng-deep .tick-flip-card{position:absolute;z-index:1;left:0;top:0;width:100%;height:100%;perspective:4em}:host ::ng-deep .tick-flip-panel-back,:host ::ng-deep .tick-flip-panel-front{position:absolute;left:0;width:100%;height:51%;-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-style:preserve-3d}:host ::ng-deep .tick-flip-panel-back-text,:host ::ng-deep .tick-flip-panel-front-text{position:absolute;left:-1px;top:0;right:-1px;height:100%;overflow:hidden}:host ::ng-deep .tick-flip-panel-text-wrapper{position:absolute;left:0;top:0;right:0;height:100%}:host ::ng-deep .tick-flip-panel-back-text .tick-flip-panel-text-wrapper{height:200%;top:-100%}:host ::ng-deep .tick-flip-panel-front{transform-origin:center bottom;top:0;z-index:2;box-shadow:inset 0 1px rgba(255,255,255,.05)}:host ::ng-deep .tick-flip-panel-back{transform-origin:center top;top:50%;z-index:1;box-shadow:inset 0 -1px rgba(0,0,0,.1)}:host ::ng-deep .tick-flip-panel-back::after{content:\"\";z-index:1;content:\"\";position:absolute;left:0;top:0;width:100%;height:100%;background-image:linear-gradient(180deg,rgba(0,0,0,0) 1px,rgba(0,0,0,.15) 1px,transparent 30%)}:host ::ng-deep .tick-flip-panel-back-shadow{z-index:2}:host ::ng-deep .tick-flip-panel-back-highlight,:host ::ng-deep .tick-flip-panel-back-shadow{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}:host ::ng-deep .tick-flip-panel-back-highlight,:host ::ng-deep .tick-flip-panel-back-shadow,:host ::ng-deep .tick-flip-panel-front-shadow{position:absolute;left:0;top:0;right:0;bottom:0;opacity:0}:host ::ng-deep .tick-flip-panel-front-shadow{background-image:linear-gradient(to top,rgba(0,0,0,.8),rgba(0,0,0,.3))}:host ::ng-deep .tick-flip-panel-back-shadow{background-image:linear-gradient(to bottom,rgba(0,0,0,.7),rgba(0,0,0,.5))}:host ::ng-deep .tick-flip-panel-back-highlight{z-index:3;background-image:linear-gradient(to bottom,rgba(255,255,255,.15),rgba(255,255,255,.3))}:host ::ng-deep .tick [data-style*=\"shadow:inner\"],:host ::ng-deep .tick [data-style*=\"shadow:inner\"] .tick-flip-card-shadow{box-shadow:none}:host ::ng-deep .tick [data-style*=\"shadow:none\"] .tick-flip-card-shadow,:host ::ng-deep .tick [data-style*=\"shadow:none\"] .tick-flip-panel-back,:host ::ng-deep .tick [data-style*=\"shadow:none\"] .tick-flip-panel-front,:host ::ng-deep .tick [data-style*=\"shadow:none\"] .tick-flip-shadow{box-shadow:none}:host ::ng-deep .tick [data-style*=\"shadow:none\"] .tick-flip-back::after,:host ::ng-deep .tick [data-style*=\"shadow:none\"] .tick-flip-panel-back-shadow,:host ::ng-deep .tick [data-style*=\"shadow:none\"] .tick-flip-panel-back-text::after,:host ::ng-deep .tick [data-style*=\"shadow:none\"] .tick-flip-panel-front-shadow{background-image:none}:host ::ng-deep .tick [data-style*=\"rounded:none\"]{border-radius:0}:host ::ng-deep .tick [data-style*=\"rounded:panels\"] .tick-flip-front,:host ::ng-deep .tick [data-style*=\"rounded:panels\"] .tick-flip-shadow-bottom{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}:host ::ng-deep .tick [data-style*=\"rounded:panels\"] .tick-flip-back,:host ::ng-deep .tick [data-style*=\"rounded:panels\"] .tick-flip-panel-back::after,:host ::ng-deep .tick [data-style*=\"rounded:panels\"] .tick-flip-shadow-top{border-top-left-radius:inherit;border-top-right-radius:inherit}:host ::ng-deep .tick-flip{margin-left:.0625em;margin-right:.0625em;min-width:1.125em;border-radius:.125em;letter-spacing:.25em;text-indent:.25em}:host ::ng-deep .tick-flip-shadow{box-shadow:0 .125em .3125em rgba(0,0,0,.25),0 .02125em .06125em rgba(0,0,0,.25)}:host ::ng-deep .tick-flip-panel{color:#192e4d;background-color:#fff}"]
        })
    ], VfaSliderComponent);
    return VfaSliderComponent;
}());
export { VfaSliderComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmZhLXNsaWRlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly92ZmEtc2xpZGVyLyIsInNvdXJjZXMiOlsibGliL3ZmYS1zbGlkZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQy9ELE9BQU8sRUFDTCxhQUFhLEVBQ2IsaUJBQWlCLEVBQ2pCLFNBQVMsRUFDVCxVQUFVLEVBQ1YsS0FBSyxFQUNMLFNBQVMsRUFDVCxNQUFNLEVBQ04sU0FBUyxFQUNULFNBQVMsRUFDVCxhQUFhLEVBQ2IsU0FBUyxFQUNULFlBQVksR0FDYixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFFekQsT0FBTyxJQUFJLE1BQU0sYUFBYSxDQUFDO0FBQy9CLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUUvQyxJQUFNLFdBQVcsR0FBRztJQUNsQixPQUFPLEVBQUUsSUFBSSxXQUFXLENBQUM7UUFDdkIsNkJBQTZCLEVBQUUsR0FBRztLQUNuQyxDQUFDO0NBQ0gsQ0FBQztBQU9GO0lBOEJFLDRCQUNVLFFBQW1CLEVBQ25CLEdBQXNCLEVBQ3RCLFFBQXNCLEVBQ3RCLFVBQXNCO1FBSHRCLGFBQVEsR0FBUixRQUFRLENBQVc7UUFDbkIsUUFBRyxHQUFILEdBQUcsQ0FBbUI7UUFDdEIsYUFBUSxHQUFSLFFBQVEsQ0FBYztRQUN0QixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBL0J2QixTQUFJLEdBQVcsWUFBWSxDQUFDO1FBRTlCLFlBQU8sR0FBRyxLQUFLLENBQUM7UUFFaEIsY0FBUyxHQUFHLENBQUMsQ0FBQztRQUNkLFlBQU8sR0FBRyxDQUFDLENBQUM7UUFHWixTQUFJLEdBQUc7WUFDWixLQUFLLEVBQUUsOERBQThEO1lBQ3JFLEtBQUssRUFDSCxzRUFBc0U7U0FDekUsQ0FB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QUFFLE9BQU8sR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUM7U0FDL0MsQ0FBQztJQUNKLENBQUM7O2dCQXZObUIsU0FBUztnQkFDZCxpQkFBaUI7Z0JBQ1osWUFBWTtnQkFDVixVQUFVOztJQWpDdkI7UUFBUixLQUFLLEVBQUU7c0RBQWtCO0lBRWpCO1FBQVIsS0FBSyxFQUFFO29EQUE2QjtJQWNmO1FBQXJCLFNBQVMsQ0FBQyxTQUFTLENBQUM7dURBQXFCO0lBQ3JCO1FBQXBCLFNBQVMsQ0FBQyxRQUFRLENBQUM7c0RBQW9CO0lBQ2hCO1FBQXZCLFNBQVMsQ0FBQyxXQUFXLENBQUM7eURBQXVCO0lBQ2hCO1FBQTdCLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQzsrREFBNkI7SUFDckM7UUFBcEIsU0FBUyxDQUFDLFFBQVEsQ0FBQztzREFBb0I7SUFDcEI7UUFBbkIsU0FBUyxDQUFDLE9BQU8sQ0FBQztxREFBbUI7SUFDZjtRQUF0QixTQUFTLENBQUMsVUFBVSxDQUFDO3dEQUFzQjtJQUNyQjtRQUF0QixTQUFTLENBQUMsVUFBVSxDQUFDO3dEQUFzQjtJQUMxQjtRQUFqQixTQUFTLENBQUMsS0FBSyxDQUFDO21EQUFpQjtJQUVYO1FBQXRCLFlBQVksQ0FBQyxPQUFPLENBQUM7cURBQThCO0lBM0J6QyxrQkFBa0I7UUFMOUIsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLFlBQVk7WUFDdEIsZ3VSQUEwQzs7U0FFM0MsQ0FBQztPQUNXLGtCQUFrQixDQXVQOUI7SUFBRCx5QkFBQztDQUFBLEFBdlBELElBdVBDO1NBdlBZLGtCQUFrQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBIZWFkZXJzIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgSW5wdXQsXG4gIE9uQ2hhbmdlcyxcbiAgT25Jbml0LFxuICBRdWVyeUxpc3QsXG4gIFJlbmRlcmVyMixcbiAgU2ltcGxlQ2hhbmdlcyxcbiAgVmlld0NoaWxkLFxuICBWaWV3Q2hpbGRyZW4sXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRG9tU2FuaXRpemVyIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XG5cbmltcG9ydCBUaWNrIGZyb20gJ0BwcWluYS9mbGlwJztcbmltcG9ydCB7IElURU1TIH0gZnJvbSAnLi92ZmEtc2xpZGVyLmNvbnN0YW50cyc7XG5cbmNvbnN0IGh0dHBPcHRpb25zID0ge1xuICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xuICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXG4gIH0pLFxufTtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndmZhLXNsaWRlcicsXG4gIHRlbXBsYXRlVXJsOiAnLi92ZmEtc2xpZGVyLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vdmZhLXNsaWRlci5jb21wb25lbnQuc2NzcyddLFxufSlcbmV4cG9ydCBjbGFzcyBWZmFTbGlkZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcyB7XG4gIEBJbnB1dCgpIHZhbHVlczogbnVtYmVyW107XG5cbiAgQElucHV0KCkgZGF0ZTogc3RyaW5nID0gJzA0LjA5LjIwMjAnO1xuXG4gIHB1YmxpYyBjb250ZW50ID0gSVRFTVM7XG5cbiAgcHVibGljIGFjdGl2ZUlkeCA9IDA7XG4gIHB1YmxpYyBsYXN0SWR4ID0gMDtcbiAgcHJpdmF0ZSBmbGlwcGVyO1xuXG4gIHB1YmxpYyBzdmdzID0ge1xuICAgIHBsYW5lOiAnTTcgMzBMMCAtMi42MjI2OGUtMDZMMzAgMTVMNjAgMzBMMzAgNDVMLTIuNjIyNjhlLTA2IDYwTDcgMzBaJyxcbiAgICBhcnJvdzpcbiAgICAgICdNMTIgMjFMMjEuNSAzMEw0OSAtNC41ODk3ZS0wN0w1OS41IDEyLjVMMjAgNTVMLTEuNDg2MTllLTA2IDM0TDEyIDIxWicsXG4gIH07XG5cbiAgQFZpZXdDaGlsZCgnc2VjdGlvbicpIHNlY3Rpb246IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ3JpbmdCZycpIHJpbmdCZzogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgncGxhbmVXcmFwJykgcGxhbmVXcmFwOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdyZWNydWl0bWVudFRleHQnKSByZWNydWl0bWVudFRleHQ6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ251bWJlcicpIG51bWJlcjogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgnYXJyb3cnKSBhcnJvdzogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgnc3ZnQXJyb3cnKSBzdmdBcnJvdzogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgnc3ZnQ2hlY2snKSBzdmdDaGVjazogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgnYXJjJykgYXJjOiBFbGVtZW50UmVmO1xuICAvLyBAVmlld0NoaWxkKCdzdmdBbmltYXRpb24nKSBzdmdBbmltYXRpb246IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGRyZW4oJ3N0ZXBzJykgc3RlcHM6IFF1ZXJ5TGlzdDxFbGVtZW50UmVmPjtcbiAgdGl0bGUgPSAndnJtJztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXG4gICAgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIHByaXZhdGUgc2FuaXRpemU6IERvbVNhbml0aXplcixcbiAgICBwcml2YXRlIGh0dHBDbGllbnQ6IEh0dHBDbGllbnRcbiAgKSB7fVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy52YWx1ZXMpIHtcbiAgICAgIHRoaXMuZ2V0RGF0YSgpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldERhdGEoKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmh0dHBDbGllbnRcbiAgICAgIC5nZXQ8YW55PignaHR0cHM6Ly92ZmEuMjNkLmdyL2FwaS92YWx1ZXMnLCBodHRwT3B0aW9ucylcbiAgICAgIC50b1Byb21pc2UoKTtcblxuICAgIHJlc3BvbnNlLnZhbHVlcy5mb3JFYWNoKCh2YWx1ZSwgaWR4KSA9PiAodGhpcy5jb250ZW50W2lkeF0udmFsdWUgPSB2YWx1ZSkpO1xuICAgIHRoaXMuZGF0ZSA9IHJlc3BvbnNlLmRhdGU7XG5cbiAgICB0aGlzLnNldEFjdGl2ZSgwKTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICBpZiAodGhpcy52YWx1ZXMpIHtcbiAgICAgIGxldCB2YWx1ZXMgPSB0aGlzLnZhbHVlcztcbiAgICAgIGlmICh0eXBlb2YgdmFsdWVzID09PSAnc3RyaW5nJykge1xuICAgICAgICB2YWx1ZXMgPSBKU09OLnBhcnNlKHZhbHVlcyk7XG4gICAgICB9XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpKSB7XG4gICAgICAgIHZhbHVlcy5mb3JFYWNoKCh2YWx1ZSwgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50W2lkeF0udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZXMudmFsdWVzICYmICFjaGFuZ2VzLnZhbHVlcy5pc0ZpcnN0Q2hhbmdlKCkpIHtcbiAgICAgICAgdGhpcy5zZXRBY3RpdmUodGhpcy5hY3RpdmVJZHgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjaGFuZ2VzLmRhdGUpIHtcbiAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICB9XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XG4gICAgdGhpcy5mbGlwcGVyID0gVGljay5ET00uY3JlYXRlKHRoaXMubnVtYmVyLm5hdGl2ZUVsZW1lbnQsIHtcbiAgICAgIHZhbHVlOiAwLFxuICAgIH0pO1xuXG4gICAgY29uc3QgYXJjID0gdGhpcy5nZW5lcmF0ZUFyYygyMDAsIDIwMCwgMjAwLCAyNSwgMzM1KTtcbiAgICBjb25zb2xlLmxvZyhhcmMpO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKHRoaXMuYXJjLm5hdGl2ZUVsZW1lbnQsICdkJywgYXJjKTtcbiAgICBpZiAodGhpcy52YWx1ZXMpIHtcbiAgICAgIHRoaXMuc2V0QWN0aXZlKDApO1xuICAgIH1cbiAgfVxuXG4gIHNldEFjdGl2ZShpZHgpIHtcbiAgICB0aGlzLmxhc3RJZHggPSB0aGlzLmFjdGl2ZUlkeDtcbiAgICB0aGlzLmFjdGl2ZUlkeCA9IGlkeDtcblxuICAgIC8vIGNvbnN0IHJvdGF0aW9uID0gKDM2MCAvIHRoaXMuY29udGVudC5sZW5ndGgpICogdGhpcy5hY3RpdmVJZHg7XG4gICAgY29uc3Qgcm90YXRpb24gPSAzNjAgLSAoKDM2MCAvIHRoaXMuY29udGVudC5sZW5ndGgpICogdGhpcy5hY3RpdmVJZHggKyAyNSk7XG5cbiAgICBsZXQgZGlmZmVyZW5jZSA9IHRoaXMubGFzdElkeCAtIHRoaXMuYWN0aXZlSWR4O1xuXG4gICAgaWYgKGRpZmZlcmVuY2UgPCAwKSB7XG4gICAgICBkaWZmZXJlbmNlID0gZGlmZmVyZW5jZSAqIC0xO1xuICAgIH1cblxuICAgIGNvbnN0IGFuaW1hdGlvbkR1cmF0aW9uID0gNTAwICsgMzAwICogZGlmZmVyZW5jZTtcbiAgICBjb25zdCBwbGFuZSA9IHRoaXMucGxhbmVXcmFwLm5hdGl2ZUVsZW1lbnQ7XG4gICAgY29uc3QgcGF0aDogU1ZHR2VvbWV0cnlFbGVtZW50ID0gdGhpcy5yaW5nQmcubmF0aXZlRWxlbWVudDtcbiAgICBjb25zdCBsZW5ndGggPVxuICAgICAgcGF0aC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgPiAwICYmIHBhdGguZ2V0VG90YWxMZW5ndGhcbiAgICAgICAgPyBwYXRoLmdldFRvdGFsTGVuZ3RoKClcbiAgICAgICAgOiAwO1xuXG4gICAgbGV0IG9wYWNpdHlEZWxheSA9IDA7XG4gICAgaWYgKHRoaXMuYWN0aXZlSWR4ID09PSB0aGlzLmNvbnRlbnQubGVuZ3RoIC0gMSkge1xuICAgICAgb3BhY2l0eURlbGF5ID0gMzAwICogZGlmZmVyZW5jZTtcbiAgICB9XG5cbiAgICBpZiAocGxhbmUpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoXG4gICAgICAgIHBsYW5lLFxuICAgICAgICAndHJhbnNpdGlvbicsXG4gICAgICAgIGAke2FuaW1hdGlvbkR1cmF0aW9ufW1zIHRyYW5zZm9ybSBjdWJpYy1iZXppZXIoMC42NDUsIDAuMDQ1LCAwLjM1NSwgMSlgXG4gICAgICApO1xuICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcbiAgICAgICAgcGxhbmUsXG4gICAgICAgICd0cmFuc2Zvcm0nLFxuICAgICAgICAndHJhbnNsYXRlWSgtNTAlKSByb3RhdGUoJyArIHJvdGF0aW9uICsgJ2RlZyknXG4gICAgICApO1xuXG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxuICAgICAgICB0aGlzLnN2Z0Fycm93Lm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgICd0cmFuc2l0aW9uJyxcbiAgICAgICAgYG9wYWNpdHkgNTAwbXMgJHtvcGFjaXR5RGVsYXl9bXMgY3ViaWMtYmV6aWVyKDAuNjQ1LCAwLjA0NSwgMC4zNTUsIDEpYFxuICAgICAgKTtcblxuICAgICAgLy8gdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcbiAgICAgIC8vICAgdGhpcy5zdmdDaGVjay5uYXRpdmVFbGVtZW50LFxuICAgICAgLy8gICAndHJhbnNpdGlvbicsXG4gICAgICAvLyAgIGBvcGFjaXR5IDUwMG1zICR7b3BhY2l0eURlbGF5fW1zIGN1YmljLWJlemllcigwLjY0NSwgMC4wNDUsIDAuMzU1LCAxKWBcbiAgICAgIC8vICk7XG5cbiAgICAgIGlmICh0aGlzLmFjdGl2ZUlkeCA9PT0gdGhpcy5jb250ZW50Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLnN2Z0Fycm93Lm5hdGl2ZUVsZW1lbnQsICdvcGFjaXR5JywgJzAnKTtcbiAgICAgICAgLy8gdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcbiAgICAgICAgLy8gICB0aGlzLnN2Z0NoZWNrLm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgIC8vICAgJ29wYWNpdHknLFxuICAgICAgICAvLyAgICcxJ1xuICAgICAgICAvLyApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLnN2Z0Fycm93Lm5hdGl2ZUVsZW1lbnQsICdvcGFjaXR5JywgJzEnKTtcbiAgICAgICAgLy8gdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcbiAgICAgICAgLy8gICB0aGlzLnN2Z0NoZWNrLm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgIC8vICAgJ29wYWNpdHknLFxuICAgICAgICAvLyAgICcwJ1xuICAgICAgICAvLyApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocGF0aCkge1xuICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcbiAgICAgICAgcGF0aCxcbiAgICAgICAgJ3RyYW5zaXRpb24nLFxuICAgICAgICBhbmltYXRpb25EdXJhdGlvbiArICdtcyBhbGwgY3ViaWMtYmV6aWVyKDAuNjQ1LCAwLjA0NSwgMC4zNTUsIDEpJ1xuICAgICAgKTtcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUocGF0aCwgJ3N0cm9rZS1kYXNoYXJyYXknLCBsZW5ndGgpO1xuXG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxuICAgICAgICBwYXRoLFxuICAgICAgICAnc3Ryb2tlLWRhc2hvZmZzZXQnLFxuICAgICAgICBsZW5ndGggLSAobGVuZ3RoIC8gdGhpcy5jb250ZW50Lmxlbmd0aCkgKiB0aGlzLmFjdGl2ZUlkeFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLmZsaXBwZXIudmFsdWUgPSB0aGlzLmNvbnRlbnRbdGhpcy5hY3RpdmVJZHhdLnZhbHVlO1xuXG4gICAgLy8gY29uc3QgaGVpZ2h0ID0gdGhpcy5zdGVwcy50b0FycmF5KClbdGhpcy5hY3RpdmVJZHhdLm5hdGl2ZUVsZW1lbnRcbiAgICAvLyAgIC5zY3JvbGxIZWlnaHQ7XG5cbiAgICAvLyB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxuICAgIC8vICAgdGhpcy5yZWNydWl0bWVudFRleHQubmF0aXZlRWxlbWVudCxcbiAgICAvLyAgICdoZWlnaHQnLFxuICAgIC8vICAgaGVpZ2h0ICsgJ3B4J1xuICAgIC8vICk7XG4gICAgLy8gdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcbiAgICAvLyAgIHRoaXMucmVjcnVpdG1lbnRUZXh0Lm5hdGl2ZUVsZW1lbnQsXG4gICAgLy8gICAnYmFja2dyb3VuZC1jb2xvcicsXG4gICAgLy8gICB0aGlzLmNvbnRlbnRbdGhpcy5hY3RpdmVJZHhdLmJhY2tncm91bmRDb2xvclxuICAgIC8vICk7XG4gICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcbiAgICAgIHRoaXMuc2VjdGlvbi5uYXRpdmVFbGVtZW50LFxuICAgICAgJ2JhY2tncm91bmQtY29sb3InLFxuICAgICAgdGhpcy5jb250ZW50W3RoaXMuYWN0aXZlSWR4XS5iYWNrZ3JvdW5kQ29sb3JcbiAgICApO1xuXG4gICAgLy8gbGV0IHN2Z0Zvcm0gPSB0aGlzLnN2Z3MucGxhbmU7XG5cbiAgICAvLyB0aGlzLnN2Z0FuaW1hdGlvbi5uYXRpdmVFbGVtZW50LmJlZ2luRWxlbWVudCgpO1xuICAgIC8vIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKHRoaXMuYXJyb3cubmF0aXZlRWxlbWVudCwgJ2QnLCBzdmdGb3JtKTtcbiAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cblxuICB0cmFuc2Zvcm0oaWR4KSB7XG4gICAgcmV0dXJuIHRoaXMuc2FuaXRpemUuYnlwYXNzU2VjdXJpdHlUcnVzdFN0eWxlKFxuICAgICAgJ3RyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKCcgK1xuICAgICAgICAoMzYwIC0gKCgzNjAgLyB0aGlzLmNvbnRlbnQubGVuZ3RoKSAqIGlkeCArIDI1KSkgK1xuICAgICAgICAnZGVnKSdcbiAgICApO1xuICB9XG5cbiAgdHJhbnNmb3JtSW5uZXIoaWR4KSB7XG4gICAgbGV0IHNjYWxlID0gJyc7XG4gICAgaWYgKGlkeCA9PT0gdGhpcy5hY3RpdmVJZHggJiYgaWR4ID09PSB0aGlzLmNvbnRlbnQubGVuZ3RoIC0gMSkge1xuICAgICAgc2NhbGUgPSAnIHNjYWxlKDEuMiknO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zYW5pdGl6ZS5ieXBhc3NTZWN1cml0eVRydXN0U3R5bGUoXG4gICAgICAncm90YXRlKCcgKyAoMzYwIC0gKCgtMzYwIC8gdGhpcy5jb250ZW50Lmxlbmd0aCkgKiBpZHggLSAyNSkpICsgJ2RlZyknICsgc2NhbGVcbiAgICApO1xuICB9XG5cbiAgZ2VuZXJhdGVBcmMoeCwgeSwgcmFkaXVzLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5wb2xhclRvQ2FydGVzaWFuKHgsIHksIHJhZGl1cywgZW5kQW5nbGUpO1xuICAgIGNvbnN0IGVuZCA9IHRoaXMucG9sYXJUb0NhcnRlc2lhbih4LCB5LCByYWRpdXMsIHN0YXJ0QW5nbGUpO1xuXG4gICAgY29uc3QgbGFyZ2VBcmNGbGFnID0gZW5kQW5nbGUgLSBzdGFydEFuZ2xlIDw9IDE4MCA/ICcwJyA6ICcxJztcblxuICAgIGNvbnN0IGQgPSBbXG4gICAgICAnTScsXG4gICAgICBzdGFydC54LFxuICAgICAgc3RhcnQueSxcbiAgICAgICdBJyxcbiAgICAgIHJhZGl1cyxcbiAgICAgIHJhZGl1cyxcbiAgICAgIDAsXG4gICAgICBsYXJnZUFyY0ZsYWcsXG4gICAgICAwLFxuICAgICAgZW5kLngsXG4gICAgICBlbmQueSxcbiAgICBdLmpvaW4oJyAnKTtcblxuICAgIHJldHVybiBkO1xuICB9XG4gIHBvbGFyVG9DYXJ0ZXNpYW4oY2VudGVyWCwgY2VudGVyWSwgcmFkaXVzLCBhbmdsZUluRGVncmVlcykge1xuICAgIGNvbnN0IGFuZ2xlSW5SYWRpYW5zID0gKChhbmdsZUluRGVncmVlcyAtIDkwKSAqIE1hdGguUEkpIC8gMTgwLjA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgeDogY2VudGVyWCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKSxcbiAgICAgIHk6IGNlbnRlclkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZUluUmFkaWFucyksXG4gICAgfTtcbiAgfVxufVxuIl19