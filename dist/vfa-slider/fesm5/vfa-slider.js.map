{"version":3,"file":"vfa-slider.js","sources":["ng://vfa-slider/lib/vfa-slider.service.ts","ng://vfa-slider/lib/vfa-slider.component.ts","ng://vfa-slider/lib/vfa-slider.module.ts","ng://vfa-slider/public-api.ts","ng://vfa-slider/vfa-slider.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ComponentsService {\n\n  constructor() { }\n}\n","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  Input,\n  OnChanges,\n  OnInit,\n  QueryList,\n  Renderer2,\n  SimpleChanges,\n  ViewChild,\n  ViewChildren,\n  ViewEncapsulation,\n} from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\nimport Tick from '@pqina/flip';\n\n@Component({\n  selector: 'vfa-slider',\n  templateUrl: './vfa-slider.component.html',\n  styleUrls: ['./vfa-slider.component.scss'],\n})\nexport class VfaSliderComponent implements OnInit, AfterViewInit, OnChanges {\n  @Input() values: number[];\n\n  public content = [\n    {\n      title: 'Design, Tierstudien',\n      value: 152,\n      text: 'Was vom Virus und welche Zusatzstoffe sollen enthalten sein? Erprobung auf Verträglichkeit und Wirksamkeit.',\n      backgroundColor: '#0F6292',\n    },\n    {\n      title: 'Erprobung in vergleichenden Studien mit Freiwilligen',\n      header: 'Phase I',\n      value: 16,\n      list: ['ca. 10-30 Freiwillige', 'Zur prüfen: Verträglichkeit'],\n      backgroundColor: '#1682C3',\n    },\n    {\n      title: 'Erprobung in vergleichenden Studien mit Freiwilligen',\n      header: 'Phase II',\n      value: 10,\n      list: [\n        'ca. 50-500 Freiwillige',\n        'Zur prüfen: Dosierung, Immunantwort vor Ansteckung',\n      ],\n      backgroundColor: '#1682C3',\n    },\n    {\n      title: 'Erprobung in vergleichenden Studien mit Freiwilligen',\n      header: 'Phase III',\n      value: 6,\n      list: [\n        'ca. 1.000-60.000 Freiwillige',\n        'Zur prüfen: Zuverlässigkeit des Schutzes',\n      ],\n      backgroundColor: '#1682C3',\n    },\n    {\n      title: 'Zulassungsverfahren',\n      value: 0,\n      text: 'Bei der European Merdicines Agency (EMA) mit Sitz in Amsterdam für Deutschland und alle weiteren EU-Staaten.',\n      backgroundColor: '#48BFFB',\n    },\n  ];\n\n  public activeIdx = 0;\n  public lastIdx = 0;\n  private flipper;\n\n  @ViewChild('section') section: ElementRef;\n  @ViewChild('ringBg') ringBg: ElementRef;\n  @ViewChild('planeWrap') planeWrap: ElementRef;\n  @ViewChild('recruitmentText') recruitmentText: ElementRef;\n  @ViewChild('number') number: ElementRef;\n  @ViewChild('arrow') arrow: ElementRef;\n  @ViewChildren('steps') steps: QueryList<ElementRef>;\n  title = 'vrm';\n\n  constructor(\n    private renderer: Renderer2,\n    private cdr: ChangeDetectorRef,\n    private sanitize: DomSanitizer\n  ) {}\n\n  ngOnInit(): void {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (this.values) {\n      let values = this.values;\n      if (typeof values === 'string') {\n        values = JSON.parse(values);\n      }\n      if (Array.isArray(values)) {\n        values.forEach((value, idx) => {\n          if (value != null && value !== undefined) {\n            this.content[idx].value = value;\n          }\n        });\n      }\n      if (changes.values && !changes.values.isFirstChange()) {\n        this.setActive(this.activeIdx);\n      }\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.flipper = Tick.DOM.create(this.number.nativeElement, {\n      value: this.content[0].value,\n    });\n\n    this.setActive(0);\n  }\n\n  setActive(idx) {\n    this.lastIdx = this.activeIdx;\n    this.activeIdx = idx;\n\n    const rotation = (360 / this.content.length) * this.activeIdx;\n\n    let difference = this.lastIdx - this.activeIdx;\n\n    if (difference < 0) {\n      difference = difference * -1;\n    }\n\n    const animationDuration = 1000 + 300 * difference;\n    const plane: SVGGeometryElement = this.planeWrap.nativeElement;\n    const path = this.ringBg.nativeElement;\n    const length = path.scrollHeight > 0 && path.getTotalLength ? path.getTotalLength() : 0;\n\n    if (plane) {\n      this.renderer.setStyle(\n        plane,\n        'transition',\n        animationDuration + 'ms all cubic-bezier(0.645, 0.045, 0.355, 1)'\n      );\n      this.renderer.setStyle(\n        plane,\n        'transform',\n        'translateY(-50%) rotate(' + rotation + 'deg)'\n      );\n    }\n    if (path) {\n      this.renderer.setStyle(\n        path,\n        'transition',\n        animationDuration + 'ms all cubic-bezier(0.645, 0.045, 0.355, 1)'\n      );\n      this.renderer.setStyle(path, 'stroke-dasharray', length);\n\n      this.renderer.setStyle(\n        path,\n        'stroke-dashoffset',\n        length - (length / this.content.length) * this.activeIdx\n      );\n    }\n\n    this.flipper.value = this.content[this.activeIdx].value;\n\n    // const height = this.steps.toArray()[this.activeIdx].nativeElement\n    //   .scrollHeight;\n\n    // this.renderer.setStyle(\n    //   this.recruitmentText.nativeElement,\n    //   'height',\n    //   height + 'px'\n    // );\n    // this.renderer.setStyle(\n    //   this.recruitmentText.nativeElement,\n    //   'background-color',\n    //   this.content[this.activeIdx].backgroundColor\n    // );\n    this.renderer.setStyle(\n      this.section.nativeElement,\n      'background-color',\n      this.content[this.activeIdx].backgroundColor\n    );\n\n    this.cdr.detectChanges();\n  }\n\n  transform(idx) {\n    return this.sanitize.bypassSecurityTrustStyle(\n      'translateY(-50%) rotate(' + (360 / this.content.length) * idx + 'deg)'\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { VfaSliderComponent } from './vfa-slider.component';\n\n@NgModule({\n  declarations: [VfaSliderComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [VfaSliderComponent]\n})\nexport class VfaSliderModule { }\n","/*\n * Public API Surface of components\n */\n\nexport * from './lib/vfa-slider.service';\nexport * from './lib/vfa-slider.component';\nexport * from './lib/vfa-slider.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}